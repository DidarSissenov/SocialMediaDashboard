{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[isInstagramLinked,setIsInstagramLinked]=useState(false);const[instagramData,setInstagramData]=useState(null);const[plannedPosts,setPlannedPosts]=useState([]);const[isTwitterLinked,setIsTwitterLinked]=useState(false);const[twitterProfile,setTwitterProfile]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{checkInstagramLink();checkTwitterLink();fetchPlannedPosts();},[]);const checkInstagramLink=async()=>{try{const response=await axios.get('/api/instagram/check-link');setIsLinked(response.data.isLinked);if(response.data.isLinked){fetchBasicData();}}catch(error){console.error('Error checking Instagram link:',error);setError('Error checking Instagram link.');}finally{setLoading(false);}};const fetchInstagramData=async()=>{try{const response=await axios.get('/api/instagram/basic-data');setProfileData(response.data.profile);setMediaData(response.data.media);}catch(error){console.error('Error fetching basic Instagram data:',error);}};const fetchPlannedPosts=async()=>{try{const response=await axios.get('/api/auth/posts');setPlannedPosts(response.data);}catch(error){console.error('Error fetching planned posts:',error);}};const checkTwitterLink=async()=>{try{const response=await axios.get('/api/twitter/check-link');setIsTwitterLinked(response.data.isLinked);if(response.data.isLinked){fetchTwitterProfile();}}catch(error){console.error('Error checking Twitter link:',error);setError('Error checking Twitter link.');}};const fetchTwitterProfile=async()=>{try{const response=await axios.get('/api/twitter/my-profile');setTwitterProfile(response.data);}catch(error){console.error('Error fetching Twitter profile:',error);setError('Error fetching Twitter profile.');}};const handleLinkTwitter=()=>{window.location.href='/api/twitter/oauth';};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Social Media Analytics Dashboard\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[isInstagramLinked?/*#__PURE__*/_jsx(\"button\",{onClick:fetchInstagramData,children:\"Refresh Instagram Data\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleLinkInstagram,children:\"Link Instagram Account\"}),isTwitterLinked?/*#__PURE__*/_jsx(\"button\",{onClick:fetchTwitterProfile,children:\"Refresh Twitter Data\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleLinkTwitter,children:\"Link Twitter Account\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"account-info\",children:[instagramData&&/*#__PURE__*/_jsx(\"div\",{className:\"instagram-info\"}),twitterProfile&&/*#__PURE__*/_jsxs(\"div\",{className:\"twitter-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Twitter Profile Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",twitterProfile.username]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Planned Posts\"}),plannedPosts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"media-grid\"}):/*#__PURE__*/_jsx(\"p\",{children:\"No planned posts available.\"})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","isInstagramLinked","setIsInstagramLinked","instagramData","setInstagramData","plannedPosts","setPlannedPosts","isTwitterLinked","setIsTwitterLinked","twitterProfile","setTwitterProfile","loading","setLoading","error","setError","navigate","checkInstagramLink","checkTwitterLink","fetchPlannedPosts","response","get","setIsLinked","data","isLinked","fetchBasicData","console","fetchInstagramData","setProfileData","profile","setMediaData","media","fetchTwitterProfile","handleLinkTwitter","window","location","href","children","className","onClick","handleLinkInstagram","username","length"],"sources":["C:/Users/groop/social_media_dashboard/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Dashboard = () => {\r\n    const [isInstagramLinked, setIsInstagramLinked] = useState(false);\r\n    const [instagramData, setInstagramData] = useState(null);\r\n    const [plannedPosts, setPlannedPosts] = useState([]);\r\n    const [isTwitterLinked, setIsTwitterLinked] = useState(false);\r\n    const [twitterProfile, setTwitterProfile] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        checkInstagramLink();\r\n        checkTwitterLink();\r\n        fetchPlannedPosts();\r\n    }, []);\r\n\r\n    const checkInstagramLink = async () => {\r\n        try {\r\n          const response = await axios.get('/api/instagram/check-link');\r\n          setIsLinked(response.data.isLinked);\r\n          if (response.data.isLinked) {\r\n            fetchBasicData();\r\n          }\r\n        } catch (error) {\r\n          console.error('Error checking Instagram link:', error);\r\n          setError('Error checking Instagram link.');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n    \r\n      const fetchInstagramData = async () => {\r\n        try {\r\n            const response = await axios.get('/api/instagram/basic-data');\r\n            setProfileData(response.data.profile);\r\n            setMediaData(response.data.media);\r\n          } catch (error) {\r\n            console.error('Error fetching basic Instagram data:', error);\r\n          }\r\n    };\r\n\r\n  const fetchPlannedPosts = async () => {\r\n    try {\r\n      const response = await axios.get('/api/auth/posts'); \r\n      setPlannedPosts(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching planned posts:', error);\r\n      \r\n    }\r\n  };\r\n\r\n  const checkTwitterLink = async () => {\r\n    try {\r\n        const response = await axios.get('/api/twitter/check-link');\r\n        setIsTwitterLinked(response.data.isLinked);\r\n        if (response.data.isLinked) {\r\n            fetchTwitterProfile();\r\n        }\r\n    } catch (error) {\r\n        console.error('Error checking Twitter link:', error);\r\n        setError('Error checking Twitter link.');\r\n    }\r\n};\r\n\r\nconst fetchTwitterProfile = async () => {\r\n    try {\r\n        const response = await axios.get('/api/twitter/my-profile');\r\n        setTwitterProfile(response.data);\r\n    } catch (error) {\r\n        console.error('Error fetching Twitter profile:', error);\r\n        setError('Error fetching Twitter profile.');\r\n    }\r\n};\r\n\r\nconst handleLinkTwitter = () => {\r\n    window.location.href = '/api/twitter/oauth';\r\n};\r\n\r\nif (loading) {\r\n    return <div>Loading...</div>;\r\n}\r\n\r\nif (error) {\r\n    return <div>Error: {error}</div>;\r\n}\r\n\r\nreturn (\r\n    <div className=\"dashboard\">\r\n        <header className=\"dashboard-header\">\r\n            <h1>Social Media Analytics Dashboard</h1>\r\n            <nav>\r\n                {/* Other navigation buttons */}\r\n                {isInstagramLinked ? (\r\n                    <button onClick={fetchInstagramData}>Refresh Instagram Data</button>\r\n                ) : (\r\n                    <button onClick={handleLinkInstagram}>Link Instagram Account</button>\r\n                )}\r\n                {isTwitterLinked ? (\r\n                    <button onClick={fetchTwitterProfile}>Refresh Twitter Data</button>\r\n                ) : (\r\n                    <button onClick={handleLinkTwitter}>Link Twitter Account</button>\r\n                )}\r\n            </nav>\r\n        </header>\r\n\r\n        <div className=\"account-info\">\r\n            {instagramData && (\r\n                <div className=\"instagram-info\">\r\n                    {/* Instagram profile and media information */}\r\n                </div>\r\n            )}\r\n            {twitterProfile && (\r\n                <div className=\"twitter-info\">\r\n                    <h2>Twitter Profile Information</h2>\r\n                    <p>Username: {twitterProfile.username}</p>\r\n                    {/* More Twitter account details */}\r\n                </div>\r\n            )}\r\n        </div>\r\n\r\n        <div className=\"section\">\r\n            <h2>Planned Posts</h2>\r\n            {plannedPosts.length > 0 ? (\r\n                <div className=\"media-grid\">\r\n                    {/* Display planned posts */}\r\n                </div>\r\n            ) : (\r\n                <p>No planned posts available.</p>\r\n            )}\r\n        </div>\r\n    </div>\r\n);\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}